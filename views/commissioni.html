<!DOCTYPE html>
<html class="no-js" lang="it">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Dashboard for Amazon">
    <meta name="author" content="Claudio Fusillo">
    <link href="/public/images/img.png" rel="shortcut icon">
    <link href="/public/stylesheets/bootstrap.css" rel="stylesheet">
    <link href="/public/stylesheets/style2.css" rel="stylesheet">

    <title>Commissioni</title>
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
        google.charts.load('current', {'packages': ['line']});
        google.charts.setOnLoadCallback(drawChart);

        function daysInMonth(month, year) {
            return new Date(year, month + 1, 0).getDate();
        }

        function drawChart() {

            var data = new google.visualization.DataTable();
            data.addColumn('date', 'Giorno');
            data.addColumn('number', 'Commissioni risparmiate');

            var currMonth = new Date().getMonth();
            var currYear = new Date().getFullYear();
            var currDays = daysInMonth(currMonth, currYear);
            var arr = [];
            for (var i = 1; i <= currDays; i++) {
                var item = new Array(2);
                item[0] = new Date(currYear, currMonth, i);
                item[1] = Math.random() * 100;
                arr.push(item);
            }
            data.addRows(arr);

            var chart = new google.charts.Line(document.getElementById('linechart_material'));
            chart.draw(data);
        }
    </script>
</head>

<body>
<div class="wrapper">

    <!-- Sidebar Holder -->
    <nav id="sidebar">
        <div class="sidebar-header">
            <h3>Mani' Dashboard</h3>
            <strong>Mani'</strong>
        </div>

        <ul class="list-unstyled components">
            <li>
                <a href="/dashboard">
                    <i class="glyphicon glyphicon-home"></i>
                    Home
                </a>
                <a href="/fatture">
                    <i class="glyphicon glyphicon-euro"></i>
                    Fatture
                </a>
                <a href="/store">
                    <i class="glyphicon glyphicon-tags"></i>
                    Venduto in store
                </a>
            </li>
            <li class="active">
                <a href="/commissioni">
                    <i class="glyphicon glyphicon-scissors"></i>
                    Commissioni risparmiate
                </a>
            </li>
            <li>
                <a href="/configurazioni">
                    <i class="glyphicon glyphicon-cog"></i>
                    Configurazioni
                </a>
            </li>
            <li class="exitBtn">
                <a href="#" onclick="logout()">
                    <i class="glyphicon glyphicon-off"></i>
                    ESCI
                </a>
            </li>
        </ul>
    </nav>

    <!-- Page Content Holder -->
    <div id="content">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn">
                        <i class="glyphicon glyphicon-menu-hamburger"></i>
                        MENU
                    </button>
                </div>
            </div>
        </nav>

        <h2>Commissioni risparmiate</h2>
        <p>Recuperare gli articoli venduti in store</p>
        <p>Calcolare il 15% + costi di spedizione</p>
        <p>Somma di tutti</p>
        <div class="line"></div>
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <p>https://developers.google.com/chart/interactive/docs/gallery/linechart</p>
                <div class="row">
                    <div id="linechart_material" class="chart"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/public/javascripts/jquery.js"></script>
<script src="/public/javascripts/bootstrap.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io.connect('http://localhost:8000');

    $(document).ready(function () {
        $('#sidebarCollapse').on('click', function () {
            $('#sidebar').toggleClass('active');
        });
    });

    function logout() {
        socket.emit('logout');
    }

    socket.on('redirectLogin', function () {
        window.location = '/';
    });
</script>
</body>
</html>